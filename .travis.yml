sudo: required

language: go

go:
  - 1.14

services:
  - docker

before_install:
  - sudo apt-get install jq

script:
  - make unittest

before_deploy:
  - docker login -u "$DOCKER_USERNAME" -p "$DOCKER_PASSWORD"
  - make release

deploy:
- provider: releases
  user: "$TV_USER_NAME"
  password: "$TV_PASS"
  file: 
   - build/macOS.zip
   - build/Linux.zip
   - build/Windows.zip
  skip_cleanup: true
  on:
    tags: true

