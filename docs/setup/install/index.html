



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Layer0 Documentation">
      
      
        <link rel="canonical" href="https://github.com/quintilesims/layer0/setup/install/">
      
      
        <meta name="author" content="xfra">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.3.0">
    
    
      
        <title>Install - Layer0</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0e9c8aca.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
  </head>
  
    
    
    
      <body data-md-color-primary="red" data-md-color-accent="grey">
    
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://github.com/quintilesims/layer0/" title="Layer0" class="md-header-nav__button md-logo">
          
            <img src="../../static/logo_icon.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Layer0
              </span>
              <span class="md-header-nav__topic">
                Install
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/quintilesims/layer0/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../static/logo_icon.png" width="24" height="24">
      
    </span>
    Layer0
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/quintilesims/layer0/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../releases/" title="Releases" class="md-nav__link">
      Releases
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Install
      </label>
    
    <a href="./" title="Install" class="md-nav__link md-nav__link--active">
      Install
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-1-download-and-extract-layer0" title="Part 1: Download and extract Layer0" class="md-nav__link">
    Part 1: Download and extract Layer0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-2-create-an-access-key" title="Part 2: Create an Access Key" class="md-nav__link">
    Part 2: Create an Access Key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-3-create-a-new-layer0-instance" title="Part 3: Create a new Layer0 Instance" class="md-nav__link">
    Part 3: Create a new Layer0 Instance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-4-connect-to-a-layer0-instance" title="Part 4: Connect to a Layer0 Instance" class="md-nav__link">
    Part 4: Connect to a Layer0 Instance
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrade/" title="Upgrade" class="md-nav__link">
      Upgrade
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../destroy/" title="Destroy" class="md-nav__link">
      Destroy
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/walkthrough/intro/" title="Walkthrough: Introduction" class="md-nav__link">
      Walkthrough: Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/walkthrough/deployment-1/" title="Walkthrough: Deployment 1" class="md-nav__link">
      Walkthrough: Deployment 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/walkthrough/deployment-2/" title="Walkthrough: Deployment 2" class="md-nav__link">
      Walkthrough: Deployment 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guides/one_off_task/" title="One-off Task" class="md-nav__link">
      One-off Task
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/cli/" title="Layer0 CLI" class="md-nav__link">
      Layer0 CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/setup-cli/" title="Layer0 Setup CLI" class="md-nav__link">
      Layer0 Setup CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/terraform_introduction/" title="Terraform" class="md-nav__link">
      Terraform
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/terraform-plugin/" title="Layer0 Terraform Plugin" class="md-nav__link">
      Layer0 Terraform Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/updateservice/" title="Updating a Service" class="md-nav__link">
      Updating a Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/consul/" title="Consul" class="md-nav__link">
      Consul
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/task_definition/" title="Task Definitions" class="md-nav__link">
      Task Definitions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/ecr/" title="ECR" class="md-nav__link">
      ECR
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Troubleshooting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Troubleshooting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../troubleshooting/commonissues/" title="Common Issues" class="md-nav__link">
      Common Issues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../troubleshooting/ssh/" title="Secure Shell (SSH)" class="md-nav__link">
      Secure Shell (SSH)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-1-download-and-extract-layer0" title="Part 1: Download and extract Layer0" class="md-nav__link">
    Part 1: Download and extract Layer0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-2-create-an-access-key" title="Part 2: Create an Access Key" class="md-nav__link">
    Part 2: Create an Access Key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-3-create-a-new-layer0-instance" title="Part 3: Create a new Layer0 Instance" class="md-nav__link">
    Part 3: Create a new Layer0 Instance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-4-connect-to-a-layer0-instance" title="Part 4: Connect to a Layer0 Instance" class="md-nav__link">
    Part 4: Connect to a Layer0 Instance
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/quintilesims/layer0/edit/master/docs/setup/install.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="create-a-new-layer0-instance">Create a new Layer0 Instance<a class="headerlink" href="#create-a-new-layer0-instance" title="Permanent link">#</a></h1>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">#</a></h2>
<p>Before you can install and configure Layer0, you must obtain the following:</p>
<ul>
<li>
<p><strong>An AWS account.</strong>
Please have your AWS access key and secret ready.</p>
<ul>
<li>If the aws-cli is installed you can check them here <code>cat ~/.aws/credentials</code></li>
<li>If it's not installed assign them with <code>l0-setup init --aws-access-key &lt;value&gt; --aws-secret-key &lt;value&gt;</code></li>
</ul>
</li>
<li>
<p><strong>An EC2 Key Pair.</strong>
This key pair allows you to access the EC2 instances running your Services using SSH.
If you have already created a key pair, you can use it for this process.
Otherwise, <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair">follow the AWS documentation</a> to create a new key pair.
Make a note of the name that you selected when creating the key pair.</p>
</li>
<li>
<p><strong>Terraform v0.11++</strong>
We use Terraform to create the resources that Layer0 needs.
If you're unfamiliar with Terraform, you may want to check out our <a href="../../reference/terraform_introduction">introduction</a>.
If you're ready to install Terraform, there are instructions in the <a href="https://www.terraform.io/intro/getting-started/install.html">Terraform documentation</a>.</p>
</li>
</ul>
<h2 id="part-1-download-and-extract-layer0">Part 1: Download and extract Layer0<a class="headerlink" href="#part-1-download-and-extract-layer0" title="Permanent link">#</a></h2>
<ol>
<li>In the <a href="../../index.html#download">Downloads section of the home page</a>, select the appropriate installation file for your operating system. Extract the zip file to a directory on your computer.</li>
<li>(Optional) Place the <code>l0</code> and <code>l0-setup</code> binaries into your system path. 
For more information about adding directories to your system path, see the following resources:<ul>
<li>(Windows): <a href="http://www.howtogeek.com/118594/how-to-edit-your-system-path-for-easy-command-line-access/">How to Edit Your System PATH for Easy Command Line Access in Windows</a></li>
<li>(Linux/macOS): <a href="http://www.troubleshooters.com/linux/prepostpath.htm">Adding a Directory to the Path</a></li>
</ul>
</li>
</ol>
<h2 id="part-2-create-an-access-key">Part 2: Create an Access Key<a class="headerlink" href="#part-2-create-an-access-key" title="Permanent link">#</a></h2>
<p>This step will create an Identity &amp; Access Management (IAM) access key for your AWS account. 
You will use the credentials created in this section when creating, updating, or removing Layer0 instances.</p>
<p><strong>To create an Access Key:</strong></p>
<ol>
<li>
<p>In a web browser, login to the <a href="http://console.aws.amazon.com/">AWS Console</a>.</p>
</li>
<li>
<p>Click the <strong>Services</strong> dropdown menu in the upper left portion of the console page, then type <strong>IAM</strong> in the text box that appears at the top of the page after you click <strong>Services</strong>. As you type IAM, a search result will appear below the text box. Click on the IAM service result that appears below the text box.</p>
</li>
<li>
<p>In the left panel, click <strong>Groups</strong>, and then confirm that you have a group called <strong>Administrators</strong>. <div class="admonition note"><p class="admonition-title">Note</p><br /><p>If the <strong>Administrators</strong> group does not already exist, complete the following steps: <ol><li>Click <strong>Create New Group</strong>. Name the new group <strong>Administrators</strong>, and then click <strong>Next Step</strong>.</li><li>Check the <strong>AdministratorAccess</strong> policy to attach the Administrator policy to your new group.</li><li>Click <strong>Next Step</strong>, and then click <strong>Create Group</strong>.</li></ul></p></div></p>
</li>
<li>
<p>In the left panel, click <strong>Users</strong>.</p>
</li>
<li>
<p>Click the <strong>New User</strong> button and enter a unique user name you will use for Layer0. This user name can be used for multiple Layer0 installations. Check the box next to <strong>Programmatic access</strong>, and then click the <strong>Next: Permissions</strong> button.</p>
</li>
<li>
<p>Make sure the <strong>Add user to group</strong> button is highlighted. Find and check the box next to the group <strong>Administrators</strong>. Click <strong>Next: Review</strong> button to continue. This will make your newly created user an administrator for your AWS account, so be sure to keep your security credentials safe!</p>
</li>
<li>
<p>Review your choices and then click the <strong>Create user</strong> button.</p>
</li>
<li>
<p>Once your user account has been created, click the <strong>Download .csv</strong> button to save your access and secret key to a CSV file.</p>
</li>
</ol>
<h2 id="part-3-create-a-new-layer0-instance">Part 3: Create a new Layer0 Instance<a class="headerlink" href="#part-3-create-a-new-layer0-instance" title="Permanent link">#</a></h2>
<p>Now that you have downloaded Layer0 and configured your AWS account, you can create your Layer0 instance.
From a command prompt, run the following (replacing <code>&lt;instance_name&gt;</code> with a name for your Layer0 instance):</p>
<div class="codehilite"><pre><span></span>$ l0-setup init &lt;instance_name&gt;
</pre></div>


<p>This command will prompt you for many different inputs. 
Enter the required values for <strong>AWS Access Key</strong>, <strong>AWS Secret Key</strong>, and <strong>AWS SSH Key</strong> as they come up.
All remaining inputs are optional and can be set to their default by pressing enter.</p>
<div class="codehilite"><pre><span></span>...
AWS Access Key: The access_key input variable is used to provision the AWS resources
required for Layer0. This corresponds to the Access Key ID portion of an AWS Access Key.
It is recommended this key has the &#39;AdministratorAccess&#39; policy. Note that Layer0 will
only use this key for &#39;l0-setup&#39; commands associated with this Layer0 instance; the
Layer0 API will use its own key with limited permissions to provision AWS resources.

[current: &lt;none&gt;]
Please enter a value and press &#39;enter&#39;.
        Input: ABC123xzy

AWS Secret Key: The secret_key input variable is used to provision the AWS resources
required for Layer0. This corresponds to the Secret Access Key portion of an AWS Access Key.
It is recommended this key has the &#39;AdministratorAccess&#39; policy. Note that Layer0 will
only use this key for &#39;l0-setup&#39; commands associated with this Layer0 instance; the
Layer0 API will use its own key with limited permissions to provision AWS resources.

[current: &lt;none&gt;]
Please enter a value and press &#39;enter&#39;.
        Input: ZXY987cba

AWS SSH Key Pair: The ssh_key_pair input variable specifies the name of the
ssh key pair to include in EC2 instances provisioned by Layer0. This key pair must
already exist in the AWS account. The names of existing key pairs can be found
in the EC2 dashboard. Note that changing this value will not effect instances
that have already been provisioned.

[current: &lt;none&gt;]
Please enter a value and press &#39;enter&#39;.
        Input: mySSHKey
...
</pre></div>


<p>Once the <code>init</code> command has successfully completed, you're ready to actually create the resources needed to use Layer0.
Run the following command (again, replace <code>&lt;instance_name&gt;</code> with the name you've chosen for your Layer0 instance):</p>
<div class="codehilite"><pre><span></span>l0-setup apply &lt;instance_name&gt;
</pre></div>


<p>The first time you run the <code>apply</code> command, it may take around 5 minutes to complete. 
This command is idempotent; it is safe to run multiple times if it fails the first.</p>
<p>At the end of the <code>apply</code> command, your Layer0 instance's configuration and state will be automatically backed up to an S3 bucket. You can manually back up your configuration at any time using the <code>push</code> command. It's a good idea to run this command regularly (<code>l0-setup push &lt;instance_name&gt;</code>) to ensure that your configuration is backed up.
These files can be downloaded at any time using the <code>pull</code> command (<code>l0-setup pull &lt;instance_name&gt;</code>).</p>
<div class="admonition info">
<p class="admonition-title">Using a Private Docker Registry</p>
<p><strong>The procedures in this section are optional, but are highly recommended for production use.</strong></p>
</div>
<p>If you require authentication to a private Docker registry, you will need a Docker configuration file present on your machine with access to private repositories (typically located at <code>~/.docker/config.json</code>). </p>
<p>If you don't have a config file yet, you can generate one by running <code>docker login [registry-address]</code>. 
A configuration file will be generated at <code>~/.docker/config.json</code>.</p>
<p>To add this authentication to your Layer0 instance, run:</p>
<div class="codehilite"><pre><span></span>$ l0-setup init --docker-path<span class="o">=</span>&lt;path/to/config.json&gt; &lt;instance_name&gt;
</pre></div>


<p>This will reconfigure your Layer0 configuration and add a rendered file into your Layer0 instance's directory at <code>~/.layer0/&lt;instance_name&gt;/dockercfg.json</code>.</p>
<p>You can modify a Layer0 instance's <code>dockercfg.json</code> file and re-run the <code>apply</code> command (<code>l0-setup apply &lt;instance_name&gt;</code>) to make changes to your authentication. 
<strong>Note:</strong> Any EC2 instances created prior to changing your <code>dockercfg.json</code> file will need to be manually terminated since they only grab the authentication file during instance creation. 
Terminated EC2 instances will be automatically re-created by autoscaling.</p>
<div class="admonition warning">
<p class="admonition-title">Using an Existing VPC</p>
<p><strong>The procedures in this section must be followed precisely to properly install Layer0 into an existing VPC</strong></p>
</div>
<p>By default, <code>l0-setup</code> creates a new VPC to place resources. 
However, <code>l0-setup</code> can place resources in an existing VPC if the VPC meets all of the following conditions:</p>
<ul>
<li>Has access to the public internet (through a NAT instance or gateway)</li>
<li>Has at least 1 public and 1 private subnet</li>
<li>The public and private subnets have the tag <code>Tier: Public</code> or <code>Tier: Private</code>, respectively.
For information on how to tag AWS resources, please visit the <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html">AWS documentation</a>. </li>
</ul>
<p>Once you are sure the existing VPC satisfies these requirements, run the <code>init</code> command, 
placing the VPC ID when prompted:</p>
<div class="codehilite"><pre><span></span>$ l0-setup init &lt;instance_name&gt;
...
VPC ID <span class="o">(</span>optional<span class="o">)</span>: The vpc_id input variable specifies an existing AWS VPC to provision
the AWS resources required <span class="k">for</span> Layer0. If no input is specified, a new VPC will be
created <span class="k">for</span> you. Existing VPCs must satisfy the following constraints:

    - Have access to the public internet <span class="o">(</span>through a NAT instance or gateway<span class="o">)</span>
    - Have at least <span class="m">1</span> public and <span class="m">1</span> private subnet
    - Each subnet must be tagged with <span class="o">[</span><span class="s2">&quot;Tier&quot;</span>: <span class="s2">&quot;Private&quot;</span><span class="o">]</span> or <span class="o">[</span><span class="s2">&quot;Tier&quot;</span>: <span class="s2">&quot;Public&quot;</span><span class="o">]</span>

Note that changing this value will destroy and recreate any existing resources.

<span class="o">[</span>current: <span class="o">]</span>
Please enter a new value, or press <span class="s1">&#39;enter&#39;</span> to keep the current value.
        Input: vpc123
</pre></div>


<p>Once the command has completed, it is safe to run <a href="../../../reference/setup-cli#apply">apply</a> to provision the resources. </p>
<h2 id="part-4-connect-to-a-layer0-instance">Part 4: Connect to a Layer0 Instance<a class="headerlink" href="#part-4-connect-to-a-layer0-instance" title="Permanent link">#</a></h2>
<p>Once the <code>apply</code> command has run successfully, you can configure the environment variables needed to connect to the Layer0 API using the <code>endpoint</code> command.</p>
<div class="codehilite"><pre><span></span>$ l0-setup endpoint --insecure &lt;instance_name&gt;
<span class="nb">export</span> <span class="nv">LAYER0_API_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;https://l0-instance_name-api-123456.us-west-2.elb.amazonaws.com&quot;</span>
<span class="nb">export</span> <span class="nv">LAYER0_AUTH_TOKEN</span><span class="o">=</span><span class="s2">&quot;abcDEFG123&quot;</span>
<span class="nb">export</span> <span class="nv">LAYER0_SKIP_SSL_VERIFY</span><span class="o">=</span><span class="s2">&quot;1&quot;</span>
<span class="nb">export</span> <span class="nv">LAYER0_SKIP_VERSION_VERIFY</span><span class="o">=</span><span class="s2">&quot;1&quot;</span>
</pre></div>


<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>The <code>--insecure</code> flag shows configurations that bypass SSL and version verifications. 
This is required as the Layer0 API created uses a self-signed SSL certificate by default.
These settings are <strong>not</strong> recommended for production use!</p>
</div>
<p>The <code>endpoint</code> command supports a <code>--syntax</code> option, which can be used to turn configuration into a single line:</p>
<ul>
<li>Bash (default) - <code>$ eval "$(l0-setup endpoint --insecure &lt;instance_name&gt;)"</code></li>
<li>Powershell - <code>$ l0-setup endpoint --insecure --syntax=powershell &lt;instance_name&gt; | Out-String | Invoke-Expression</code></li>
</ul>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../intro/" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          <a href="../upgrade/" title="Upgrade" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Upgrade
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.cae2244d.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>