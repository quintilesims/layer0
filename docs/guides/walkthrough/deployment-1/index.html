



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Layer0 Documentation">
      
      
        <link rel="canonical" href="https://github.com/quintilesims/layer0/guides/walkthrough/deployment-1/">
      
      
        <meta name="author" content="xfra">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.3.0">
    
    
      
        <title>Walkthrough: Deployment 1 - Layer0</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.0e9c8aca.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      <script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    
  </head>
  
    
    
    
      <body data-md-color-primary="red" data-md-color-accent="grey">
    
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://github.com/quintilesims/layer0/" title="Layer0" class="md-header-nav__button md-logo">
          
            <img src="../../../static/logo_icon.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Layer0
              </span>
              <span class="md-header-nav__topic">
                Walkthrough: Deployment 1
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/quintilesims/layer0/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../../static/logo_icon.png" width="24" height="24">
      
    </span>
    Layer0
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/quintilesims/layer0/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../releases/" title="Releases" class="md-nav__link">
      Releases
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../setup/install/" title="Install" class="md-nav__link">
      Install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../setup/upgrade/" title="Upgrade" class="md-nav__link">
      Upgrade
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../setup/destroy/" title="Destroy" class="md-nav__link">
      Destroy
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../intro/" title="Walkthrough: Introduction" class="md-nav__link">
      Walkthrough: Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Walkthrough: Deployment 1
      </label>
    
    <a href="./" title="Walkthrough: Deployment 1" class="md-nav__link md-nav__link--active">
      Walkthrough: Deployment 1
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deploy-with-layer0-cli" title="Deploy with Layer0 CLI" class="md-nav__link">
    Deploy with Layer0 CLI
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-1-create-the-environment" title="Part 1: Create the Environment" class="md-nav__link">
    Part 1: Create the Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2-create-the-load-balancer" title="Part 2: Create the Load Balancer" class="md-nav__link">
    Part 2: Create the Load Balancer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-3-deploy-the-ecs-task-definition" title="Part 3: Deploy the ECS Task Definition" class="md-nav__link">
    Part 3: Deploy the ECS Task Definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-4-create-the-service" title="Part 4: Create the Service" class="md-nav__link">
    Part 4: Create the Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-the-status-of-the-service" title="Check the Status of the Service" class="md-nav__link">
    Check the Status of the Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-the-applications-url" title="Get the Application's URL" class="md-nav__link">
    Get the Application's URL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logs" title="Logs" class="md-nav__link">
    Logs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup" title="Cleanup" class="md-nav__link">
    Cleanup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-with-terraform" title="Deploy with Terraform" class="md-nav__link">
    Deploy with Terraform
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tf-a-brief-aside" title="*.tf: A Brief Aside" class="md-nav__link">
    *.tf: A Brief Aside
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-1-terraform-get" title="Part 1: Terraform Get" class="md-nav__link">
    Part 1: Terraform Get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2-terraform-init" title="Part 2: Terraform Init" class="md-nav__link">
    Part 2: Terraform Init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-3-terraform-plan" title="Part 3: Terraform Plan" class="md-nav__link">
    Part 3: Terraform Plan
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-4-terraform-apply" title="Part 4: Terraform Apply" class="md-nav__link">
    Part 4: Terraform Apply
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-happening" title="What's Happening" class="md-nav__link">
    What's Happening
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup_1" title="Cleanup" class="md-nav__link">
    Cleanup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployment-2/" title="Walkthrough: Deployment 2" class="md-nav__link">
      Walkthrough: Deployment 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../one_off_task/" title="One-off Task" class="md-nav__link">
      One-off Task
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/cli/" title="Layer0 CLI" class="md-nav__link">
      Layer0 CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/setup-cli/" title="Layer0 Setup CLI" class="md-nav__link">
      Layer0 Setup CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/terraform_introduction/" title="Terraform" class="md-nav__link">
      Terraform
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/terraform-plugin/" title="Layer0 Terraform Plugin" class="md-nav__link">
      Layer0 Terraform Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/updateservice/" title="Updating a Service" class="md-nav__link">
      Updating a Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/consul/" title="Consul" class="md-nav__link">
      Consul
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/task_definition/" title="Task Definitions" class="md-nav__link">
      Task Definitions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/ecr/" title="ECR" class="md-nav__link">
      ECR
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Troubleshooting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Troubleshooting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../troubleshooting/commonissues/" title="Common Issues" class="md-nav__link">
      Common Issues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../troubleshooting/ssh/" title="Secure Shell (SSH)" class="md-nav__link">
      Secure Shell (SSH)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deploy-with-layer0-cli" title="Deploy with Layer0 CLI" class="md-nav__link">
    Deploy with Layer0 CLI
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-1-create-the-environment" title="Part 1: Create the Environment" class="md-nav__link">
    Part 1: Create the Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2-create-the-load-balancer" title="Part 2: Create the Load Balancer" class="md-nav__link">
    Part 2: Create the Load Balancer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-3-deploy-the-ecs-task-definition" title="Part 3: Deploy the ECS Task Definition" class="md-nav__link">
    Part 3: Deploy the ECS Task Definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-4-create-the-service" title="Part 4: Create the Service" class="md-nav__link">
    Part 4: Create the Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-the-status-of-the-service" title="Check the Status of the Service" class="md-nav__link">
    Check the Status of the Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-the-applications-url" title="Get the Application's URL" class="md-nav__link">
    Get the Application's URL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logs" title="Logs" class="md-nav__link">
    Logs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup" title="Cleanup" class="md-nav__link">
    Cleanup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-with-terraform" title="Deploy with Terraform" class="md-nav__link">
    Deploy with Terraform
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tf-a-brief-aside" title="*.tf: A Brief Aside" class="md-nav__link">
    *.tf: A Brief Aside
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-1-terraform-get" title="Part 1: Terraform Get" class="md-nav__link">
    Part 1: Terraform Get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2-terraform-init" title="Part 2: Terraform Init" class="md-nav__link">
    Part 2: Terraform Init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-3-terraform-plan" title="Part 3: Terraform Plan" class="md-nav__link">
    Part 3: Terraform Plan
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-4-terraform-apply" title="Part 4: Terraform Apply" class="md-nav__link">
    Part 4: Terraform Apply
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-happening" title="What's Happening" class="md-nav__link">
    What's Happening
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup_1" title="Cleanup" class="md-nav__link">
    Cleanup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/quintilesims/layer0/blob/master/docs-src/docs/guides/walkthrough/deployment-1.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="deployment-1-a-simple-guestbook-app">Deployment 1: A Simple Guestbook App<a class="headerlink" href="#deployment-1-a-simple-guestbook-app" title="Permanent link">#</a></h1>
<p>In this section you'll learn how different Layer0 commands work together to deploy applications to the cloud.
The example application in this section is a guestbook -- a web application that acts as a simple message board.
You can choose to complete this section using either <a href="#deploy-with-layer0-cli">the Layer0 CLI</a> or <a href="#deploy-with-terraform">Terraform</a>.</p>
<hr />
<h2 id="deploy-with-layer0-cli">Deploy with Layer0 CLI<a class="headerlink" href="#deploy-with-layer0-cli" title="Permanent link">#</a></h2>
<p>If you're following along, you'll want to be working in the <code>walkthrough/deployment-1/</code> directory of your clone of the <a href="https://github.com/quintilesims/guides">guides</a> repo.</p>
<p>Files used in this deployment:</p>
<table>
<thead>
<tr>
<th>Filename</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Guestbook.Dockerrun.aws.json</code></td>
<td>Template for running the Guestbook application</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="part-1-create-the-environment">Part 1: Create the Environment<a class="headerlink" href="#part-1-create-the-environment" title="Permanent link">#</a></h3>
<p>The first step in deploying an application with Layer0 is to create an environment.
An environment is a dedicated space in which one or more services can reside.
Here, we'll create a new environment named <strong>demo-env</strong>.
At the command prompt, execute the following:</p>
<p><code>l0 environment create demo-env</code></p>
<p>We should see output like the following:</p>
<div class="codehilite"><pre><span></span>ENVIRONMENT ID  ENVIRONMENT NAME  TYPE     OS     SCALE  INSTANCE TYPE  LINKS
demoenv0fe11    demo-env          dynamic  linux  n/a    m3.medium
</pre></div>


<p>We can inspect our environments in a couple of different ways:</p>
<ul>
<li><code>l0 environment list</code> will give us a brief summary of all environments:</li>
</ul>
<div class="codehilite"><pre><span></span>ENVIRONMENT ID  ENVIRONMENT NAME  TYPE     OS
demo00e6aa9     demo-env          dynamic  linux
api             api                        linux
</pre></div>


<ul>
<li><code>l0 environment get demo-env</code> will show us more information about the <strong>demo-env</strong> environment we just created:</li>
</ul>
<div class="codehilite"><pre><span></span>ENVIRONMENT ID  ENVIRONMENT NAME  TYPE     OS     LINKS
demoenv0fe11    demo-env          dynamic  linux
</pre></div>


<ul>
<li><code>l0 environment get \*</code> illustrates wildcard matching (you could also have used <code>demo*</code> in the above command), and it will return detailed information for <em>each</em> environment, not just one - it's like a detailed <code>list</code>:</li>
</ul>
<div class="codehilite"><pre><span></span>ENVIRONMENT ID  ENVIRONMENT NAME  TYPE     OS     LINKS
demoenv0fe11    demo-env          dynamic  linux
api             api                        linux
</pre></div>


<hr />
<h3 id="part-2-create-the-load-balancer">Part 2: Create the Load Balancer<a class="headerlink" href="#part-2-create-the-load-balancer" title="Permanent link">#</a></h3>
<p>In order to expose a web application to the public internet, we need to create a load balancer.
A load balancer listens for web traffic at a specific address and directs that traffic to a Layer0 service.</p>
<p>A load balancer also has a notion of a health check - a way to assess whether or not the service is healthy and running properly.
By default, Layer0 configures the health check of a load balancer based upon a simple TCP ping to port 80 every thirty seconds.
Also by default, this ping will timeout after five seconds of no response from the service, and two consecutive successes or failures are required for the service to be considered healthy or unhealthy.</p>
<p>Here, we'll create a new load balancer named <strong>guestbook-lb</strong> inside of our environment named <strong>demo-env</strong>.
The load balancer will listen on port 80, and forward that traffic along to port 80 in the Docker container using the HTTP protocol.
Since the port configuration is already aligned with the default health check, we don't need to specify any health check configuration when we create this load balancer.
At the command prompt, execute the following:</p>
<p><code>l0 loadbalancer create --port 80:80/http demo-env guestbook-lb</code></p>
<p>We should see output like the following:</p>
<div class="codehilite"><pre><span></span>LOADBALANCER ID  LOADBALANCER NAME  ENVIRONMENT  SERVICE  PORTS       PUBLIC  URL
guestbodb65a     guestbook-lb       demo-env              80:80/HTTP  true
</pre></div>


<p>The following is a summary of the arguments passed in the above command:</p>
<ul>
<li><code>loadbalancer create</code>: creates a new load balancer</li>
<li><code>--port 80:80/HTTP</code>: instructs the load balancer to forward requests from port 80 on the load balancer to port 80 in the EC2 instance using the HTTP protocol</li>
<li><code>demo-env</code>: the name of the environment in which you are creating the load balancer</li>
<li><code>guestbook-lb</code>: a name for the load balancer itself</li>
</ul>
<p>You can inspect load balancers in the same way that you inspected environments in Part 1.
Try running the following commands to get an idea of the information available to you:</p>
<ul>
<li><code>l0 loadbalancer list</code></li>
<li><code>l0 loadbalancer get guestbook-lb</code></li>
<li><code>l0 loadbalancer get gues*</code></li>
<li><code>l0 loadbalancer get \*</code></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice that the load balancer <code>list</code> and <code>get</code> outputs list an <code>ENVIRONMENT</code> field - if you ever have load balancers (or other Layer0 entities) with the same name but in different environments, you can target a specific load balancer by qualifying it with its environment name:</p>
<p><code>`l0 loadbalancer get demo-env:guestbook-lb`</code></p>
</div>
<hr />
<h3 id="part-3-deploy-the-ecs-task-definition">Part 3: Deploy the ECS Task Definition<a class="headerlink" href="#part-3-deploy-the-ecs-task-definition" title="Permanent link">#</a></h3>
<p>The <code>deploy</code> command is used to specify the ECS task definition that outlines a web application.
A deploy, once created, can be applied to multiple services - even across different environments!</p>
<p>Here, we'll create a new deploy called <strong>guestbook-dpl</strong> that refers to the <strong>Guestbook.Dockerrun.aws.json</strong> file found in the guides reposiory.
At the command prompt, execute the following:</p>
<p><code>l0 deploy create Guestbook.Dockerrun.aws.json guestbook-dpl</code></p>
<p>We should see output like the following:</p>
<div class="codehilite"><pre><span></span>DEPLOY ID        DEPLOY NAME    VERSION
guestbook-dpl.1  guestbook-dpl  1
</pre></div>


<p>The following is a summary of the arguments passed in the above command:</p>
<ul>
<li><code>deploy create</code>: creates a new deployment and allows you to specify an ECS task definition</li>
<li><code>Guestbook.Dockerrun.aws.json</code>: the file name of the ECS task definition (use the full path of the file if it is not in your current working directory)</li>
<li><code>guestbook-dpl</code>: a name for the deploy, which you will use later when you create the service</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Deploy Versioning</p>
<p>The <code>DEPLOY NAME</code> and <code>VERSION</code> are combined to create a unique identifier for a deploy.
If you create additional deploys named <strong>guestbook-dpl</strong>, they will be assigned different version numbers.</p>
<p>You can always specify the latest version when targeting a deploy by using <code>&lt;deploy name&gt;:latest</code> -- for example, <code>guestbook-dpl:latest</code>.</p>
</div>
<p>Deploys support the same methods of inspection as environments and load balancers:</p>
<ul>
<li><code>l0 deploy list</code></li>
<li><code>l0 deploy get guestbook*</code></li>
<li><code>l0 deploy get guestbook:1</code></li>
<li><code>l0 deploy get guestbook:latest</code></li>
<li><code>l0 deploy get \*</code></li>
</ul>
<hr />
<h3 id="part-4-create-the-service">Part 4: Create the Service<a class="headerlink" href="#part-4-create-the-service" title="Permanent link">#</a></h3>
<p>The final stage of the deployment process involves using the <code>service</code> command to create a new service and associate it with the environment, load balancer, and deploy that we created in the previous sections.
The service will execute the Docker containers which have been described in the deploy.</p>
<p>Here, we'll create a new service called <strong>guestbook-svc</strong>. At the command prompt, execute the following:</p>
<p><code>l0 service create --loadbalancer demo-env:guestbook-lb demo-env guestbook-svc guestbook-dpl:latest</code></p>
<p>We should see output like the following:</p>
<div class="codehilite"><pre><span></span>SERVICE ID    SERVICE NAME   ENVIRONMENT  LOADBALANCER  DEPLOYMENTS       SCALE
guestbo9364b  guestbook-svc  demo-env     guestbook-lb  guestbook-dpl:1*  0/1
</pre></div>


<p>The following is a summary of the arguments passed in the above command:</p>
<ul>
<li><code>service create</code>: creates a new service</li>
<li><code>--loadbalancer demo-env:guestbook-lb</code>: the fully-qualified name of the load balancer; in this case, the load balancer named <strong>guestbook-lb</strong> in the environment named <strong>demo-env</strong>. <ul>
<li><em>(It is not strictly necessary to use the fully qualified name of the load balancer, unless another load balancer with exactly the same name exists in a different environment.)</em></li>
</ul>
</li>
<li><code>demo-env</code>: the name of the environment you created in Part 1</li>
<li><code>guestbook-svc</code>: a name for the service you are creating</li>
<li><code>guestbook-dpl</code>: the name of the deploy that you created in Part 3</li>
</ul>
<p>Layer0 services can be queried using the same <code>get</code> and <code>list</code> commands that we've come to expect by now.</p>
<hr />
<h3 id="check-the-status-of-the-service">Check the Status of the Service<a class="headerlink" href="#check-the-status-of-the-service" title="Permanent link">#</a></h3>
<p>After a service has been created, it may take several minutes for that service to completely finish deploying.
A service's status may be checked by using the <code>service get</code> command.</p>
<p>Let's take a peek at our <strong>guestbook-svc</strong> service.
At the command prompt, execute the following:</p>
<p><code>l0 service get demo-env:guestbook-svc</code></p>
<p>If we're quick enough, we'll be able to see the first stage of the process (this is what was output after running the <code>service create</code> command up in Part 4).
We should see an asterisk (*) next to the name of the <strong>guestbook-dpl:1</strong> deploy, which indicates that the service is in a transitional state:</p>
<div class="codehilite"><pre><span></span>SERVICE ID    SERVICE NAME   ENVIRONMENT  LOADBALANCER  DEPLOYMENTS       SCALE
guestbo9364b  guestbook-svc  demo-env     guestbook-lb  guestbook-dpl:1*  0/1
</pre></div>


<p>In the next phase of deployment, if we execute the <code>service get</code> command again, we will see <strong>(1)</strong> in the <strong>Scale</strong> column; this indicates that 1 copy of the service is transitioning to an active state:</p>
<div class="codehilite"><pre><span></span>SERVICE ID    SERVICE NAME   ENVIRONMENT  LOADBALANCER  DEPLOYMENTS       SCALE
guestbo9364b  guestbook-svc  demo-env     guestbook-lb  guestbook-dpl:1*  0/1 (1)
</pre></div>


<p>In the final phase of deployment, we will see <strong>1/1</strong> in the <strong>Scale</strong> column; this indicates that the service is running 1 copy:</p>
<div class="codehilite"><pre><span></span>SERVICE ID    SERVICE NAME   ENVIRONMENT  LOADBALANCER  DEPLOYMENTS       SCALE
guestbo9364b  guestbook-svc  demo-env     guestbook-lb  guestbook-dpl:1   1/1
</pre></div>


<hr />
<h3 id="get-the-applications-url">Get the Application's URL<a class="headerlink" href="#get-the-applications-url" title="Permanent link">#</a></h3>
<p>Once the service has been completely deployed, we can obtain the URL for the application and launch it in a browser.</p>
<p>At the command prompt, execute the following:</p>
<p><code>l0 loadbalancer get demo-env:guestbook-lb</code></p>
<p>We should see output like the following:</p>
<div class="codehilite"><pre><span></span>LOADBALANCER ID  LOADBALANCER NAME  ENVIRONMENT  SERVICE        PORTS       PUBLIC  URL
guestbodb65a     guestbook-lb       demo-env     guestbook-svc  80:80/HTTP  true    &lt;url&gt;
</pre></div>


<p>Copy the value shown in the <strong>URL</strong> column and paste it into a web browser.
The guestbook application will appear (once the service has completely finished deploying).</p>
<hr />
<h3 id="logs">Logs<a class="headerlink" href="#logs" title="Permanent link">#</a></h3>
<p>Output from a Service's docker containers may be acquired by running the following command:</p>
<div class="codehilite"><pre><span></span>l0 service logs &lt;SERVICE&gt;
</pre></div>


<hr />
<h3 id="cleanup">Cleanup<a class="headerlink" href="#cleanup" title="Permanent link">#</a></h3>
<p>If you're finished with the example and don't want to continue with this walkthrough, you can instruct Layer0 to delete the environment and terminate the application.</p>
<p><code>l0 environment delete demo-env</code></p>
<p>However, if you intend to continue through <a href="../deployment-2">Deployment 2</a>, you will want to keep the resources you made in this section.</p>
<hr />
<h2 id="deploy-with-terraform">Deploy with Terraform<a class="headerlink" href="#deploy-with-terraform" title="Permanent link">#</a></h2>
<p>Instead of using the Layer0 CLI directly, you can instead use our Terraform provider, and deploy using Terraform <em>(<a href="../../../reference/terraform-plugin">learn more</a>)</em>.
You can use Terraform with Layer0 and AWS to create "fire-and-forget" deployments for your applications.</p>
<p>If you're following along, you'll want to be working in the <code>walkthrough/deployment-1/</code> directory of your clone of the <a href="https://github.com/quintilesims/guides">guides</a> repo.</p>
<p>We use these files to set up a Layer0 environment with Terraform:</p>
<table>
<thead>
<tr>
<th>Filename</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>main.tf</code></td>
<td>Provisions resources; populates resources in template files</td>
</tr>
<tr>
<td><code>outputs.tf</code></td>
<td>Values that Terraform will yield during deployment</td>
</tr>
<tr>
<td><code>terraform.tfstate</code></td>
<td>Tracks status of deployment <em>(created and managed by Terraform)</em></td>
</tr>
<tr>
<td><code>terraform.tfvars</code></td>
<td>Variables specific to the environment and application(s)</td>
</tr>
<tr>
<td><code>variables.tf</code></td>
<td>Values that Terraform will use during deployment</td>
</tr>
</tbody>
</table>
<h3 id="tf-a-brief-aside"><code>*.tf</code>: A Brief Aside<a class="headerlink" href="#tf-a-brief-aside" title="Permanent link">#</a></h3>
<p>Let's take a moment to discuss the <code>.tf</code> files.
The names of these files (and even the fact that they are separated out into multiple files at all) are completely arbitrary and exist soley for human-readability.
Terraform understands all <code>.tf</code> files in a directory all together.</p>
<p>In <code>variables.tf</code>, you'll see <code>"endpoint"</code> and <code>"token"</code> variables.</p>
<p>In <code>outputs.tf</code>, you'll see that Terraform should spit out the url of the guestbook's load balancer once deployment has finished.</p>
<p>In <code>main.tf</code>, you'll see the bulk of the deployment process.
If you've followed along with the Layer0 CLI deployment above, it should be fairly easy to see how blocks in this file map to steps in the CLI process.
When we began the CLI deployment, our first step was to create an environment:</p>
<p><code>l0 environment create demo-env</code></p>
<p>This command is recreated in <code>main.tf</code> like so:</p>
<div class="codehilite"><pre><span></span># walkthrough/deployment-1/main.tf

resource &quot;layer0_environment&quot; &quot;demo-env&quot; {
    name = &quot;demo-env&quot;
}
</pre></div>


<p>We've bundled up the heart of the Guestbook deployment (load balancer, deploy, service, etc.) into a <a href="https://www.terraform.io/docs/modules/usage.html">Terraform module</a>.
To use it, we declare a <code>module</code> block and pass in the source of the module as well as any configuration or variables that the module needs.</p>
<div class="codehilite"><pre><span></span># walkthrough/deployment-1/main.tf

module &quot;guestbook&quot; {
    source         = &quot;github.com/quintilesims/guides//guestbook/module&quot;
    environment_id = &quot;<span class="cp">${</span><span class="n">layer0_environment</span><span class="o">.</span><span class="n">demo</span><span class="o">.</span><span class="n">id</span><span class="cp">}</span>&quot;
}
</pre></div>


<p>You can see that we pass in the ID of the environment we create.
All variables declared in this block are passed to the module, so the next file we should look at is <code>variables.tf</code> inside of the module to get an idea of what the module is expecting.</p>
<p>There are a lot of variables here, but only one of them doesn't have a default value.</p>
<div class="codehilite"><pre><span></span># guestbook/module/variables.tf

variable &quot;environment_id&quot; {
    description = &quot;id of the layer0 environment in which to create resources&quot;
}
</pre></div>


<p>You'll notice that this is the variable that we're passing in.
For this particular deployment of the Guestbook, all of the default options are fine.
We could override any of them if we wanted to, just by specifying a new value for them back in <code>deployment-1/main.tf</code>.</p>
<p>Now that we've seen the variables that the module will have, let's take a look at part of <code>module/main.tf</code> and see how some of them might be used:</p>
<div class="codehilite"><pre><span></span># guestbook/module/main.tf

resource &quot;layer0_load_balancer&quot; &quot;guestbook-lb&quot; {
    name = &quot;<span class="cp">${</span><span class="n">var</span><span class="o">.</span><span class="n">load_balancer_name</span><span class="cp">}</span>&quot;
    environment = &quot;<span class="cp">${</span><span class="n">var</span><span class="o">.</span><span class="n">environment_id</span><span class="cp">}</span>&quot;
    port {
        host_port = 80
        container_port = 80
        protocol = &quot;http&quot;
    }
}

...
</pre></div>


<p>You can follow <a href="../../../reference/terraform-plugin/">this link</a> to learn more about Layer0 resources in Terraform.</p>
<hr />
<h3 id="part-1-terraform-get">Part 1: Terraform Get<a class="headerlink" href="#part-1-terraform-get" title="Permanent link">#</a></h3>
<p>This deployment uses modules, and our customer layer0 provider so we'll need 
to fetch those source materials. At the command prompt, execute the following command:</p>
<p><code>terraform init</code></p>
<p>We should see output like the following:</p>
<div class="codehilite"><pre><span></span><span class="n">Get</span><span class="o">:</span> <span class="n">git</span><span class="o">::</span><span class="n">https</span><span class="o">://</span><span class="n">github</span><span class="o">.</span><span class="na">com</span><span class="sr">/quintilesims/g</span><span class="n">uides</span><span class="o">.</span><span class="na">git</span>
</pre></div>


<p>We should now have a new local directory called <code>.terraform/</code>.
We don't need to do anything with it; we just want to make sure it's there.</p>
<hr />
<h3 id="part-2-terraform-init">Part 2: Terraform Init<a class="headerlink" href="#part-2-terraform-init" title="Permanent link">#</a></h3>
<p>This deployment has provider dependencies so an init call must be made. 
(Terraform v0.11~ requries init)
At the command prompt, execute the following command:</p>
<p><code>terraform init</code></p>
<p>We should see output like the following:</p>
<div class="codehilite"><pre><span></span>Initializing modules...
- module.guestbook

Initializing provider plugins...
- Checking for available provider plugins on https://releases.hashicorp.com...
- Downloading plugin for provider &quot;template&quot; (1.0.0)...

The following providers do not have any version constraints in configuration,
so the latest version was installed.

To prevent automatic upgrades to new major versions that may contain breaking
changes, it is recommended to add version = &quot;...&quot; constraints to the
corresponding provider blocks in configuration, with the constraint strings
suggested below.

* provider.template: version = &quot;~&gt; 1.0&quot;

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running &quot;terraform plan&quot; to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.
</pre></div>


<hr />
<h3 id="part-3-terraform-plan">Part 3: Terraform Plan<a class="headerlink" href="#part-3-terraform-plan" title="Permanent link">#</a></h3>
<p>Before we actually create/update/delete any resources, it's a good idea to find out what Terraform intends to do.</p>
<p>Run <code>terraform plan</code>. Terraform will prompt you for configuration values that it does not have:</p>
<div class="codehilite"><pre><span></span>var.endpoint
    Enter a value:

var.token
    Enter a value:
</pre></div>


<p>You can find these values by running <code>l0-setup endpoint &lt;your layer0 prefix&gt;</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are a few ways to configure Terraform so that you don't have to keep entering these values every time you run a Terraform command (editing the <code>terraform.tfvars</code> file, or exporting evironment variables like <code>TF_VAR_endpoint</code> and <code>TF_VAR_token</code>, for example). See the <a href="https://www.terraform.io/docs/configuration/variables.html">Terraform Docs</a> for more.</p>
</div>
<p>The <code>plan</code> command should give us output like the following:</p>
<div class="codehilite"><pre><span></span>Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

data.template_file.guestbook: Refreshing state...
The Terraform execution plan has been generated and is shown below.
Resources are shown in alphabetical order for quick scanning. Green resources
will be created (or destroyed and then created if an existing resource
exists), yellow resources are being changed in-place, and red resources
will be destroyed. Cyan entries are data sources to be read.

Note: You didn&#39;t specify an &quot;-out&quot; parameter to save this plan, so when
&quot;apply&quot; is called, Terraform can&#39;t guarantee this is what will execute.

+ layer0_environment.demo
    ami:               &quot;&quot; =&gt; &quot;<span class="nt">&lt;computed&gt;</span>&quot;
    current_scale:     &quot;&quot; =&gt; &quot;<span class="nt">&lt;computed&gt;</span>&quot;
    instance_type:     &quot;&quot; =&gt; &quot;m3.medium&quot;
    name:              &quot;&quot; =&gt; &quot;demo&quot;
    os:                &quot;&quot; =&gt; &quot;linux&quot;
    scale:             &quot;&quot; =&gt; &quot;0&quot;
    security_group_id: &quot;&quot; =&gt; &quot;<span class="nt">&lt;computed&gt;</span>&quot;

+ module.guestbook.layer0_deploy.guestbook
    content: &quot;{\n    \&quot;AWSEBDockerrunVersion\&quot;: 2,\n    \&quot;containerDefinitions\&quot;: [\n        {\n            \&quot;name\&quot;: \&quot;guestbook\&quot;,\n            \&quot;image\&quot;: \&quot;quintilesims/guestbook\&quot;,\n            \&quot;essential\&quot;: true,\n      \&quot;memory\&quot;: 128,\n            \&quot;environment\&quot;: [\n                {\n                    \&quot;name\&quot;: \&quot;GUESTBOOK_BACKEND_TYPE\&quot;,\n                    \&quot;value\&quot;: \&quot;memory\&quot;\n                },\n                {\n          \&quot;name\&quot;: \&quot;GUESTBOOK_BACKEND_CONFIG\&quot;,\n                    \&quot;value\&quot;: \&quot;\&quot;\n                },\n           {\n                    \&quot;name\&quot;: \&quot;AWS_ACCESS_KEY_ID\&quot;,\n                    \&quot;value\&quot;: \&quot;\&quot;\n        },\n                {\n                    \&quot;name\&quot;: \&quot;AWS_SECRET_ACCESS_KEY\&quot;,\n                    \&quot;value\&quot;: \&quot;\&quot;\n                },\n                {\n                    \&quot;name\&quot;: \&quot;AWS_REGION\&quot;,\n      \&quot;value\&quot;: \&quot;us-west-2\&quot;\n                }\n            ],\n            \&quot;portMappings\&quot;: [\n   {\n                    \&quot;hostPort\&quot;: 80,\n                    \&quot;containerPort\&quot;: 80\n                }\n      ]\n        }\n    ]\n}\n&quot;
    name:    &quot;guestbook&quot;

+ module.guestbook.layer0_load_balancer.guestbook
    environment:                    &quot;<span class="cp">${</span><span class="n">var</span><span class="o">.</span><span class="n">environment_id</span><span class="cp">}</span>&quot;
    health_check.#:                 &quot;<span class="nt">&lt;computed&gt;</span>&quot;
    name:                           &quot;guestbook&quot;
    port.#:                         &quot;1&quot;
    port.2027667003.certificate:    &quot;&quot;
    port.2027667003.container_port: &quot;80&quot;
    port.2027667003.host_port:      &quot;80&quot;
    port.2027667003.protocol:       &quot;http&quot;
    url:                            &quot;<span class="nt">&lt;computed&gt;</span>&quot;

+ module.guestbook.layer0_service.guestbook
    deploy:        &quot;<span class="cp">${</span> <span class="n">var</span><span class="o">.</span><span class="n">deploy_id</span> <span class="o">==</span> \<span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> ? layer0_deploy.guestbook.id : var.deploy_id </span><span class="cp">}</span>&quot;
    environment:   &quot;<span class="cp">${</span><span class="n">var</span><span class="o">.</span><span class="n">environment_id</span><span class="cp">}</span>&quot;
    load_balancer: &quot;<span class="cp">${</span><span class="n">layer0_load_balancer</span><span class="o">.</span><span class="n">guestbook</span><span class="o">.</span><span class="n">id</span><span class="cp">}</span>&quot;
    name:          &quot;guestbook&quot;
    scale:         &quot;1&quot;
    wait:          &quot;true&quot;


Plan: 4 to add, 0 to change, 0 to destroy.
</pre></div>


<p>This shows you that Terraform intends to create a deploy, an environment, a load balancer, and a service, all through Layer0.</p>
<p>If you've gone through this deployment using the <a href="#deploy-with-layer0-cli">Layer0 CLI</a>, you may notice that these resources appear out of order - that's fine. Terraform presents these resources in alphabetical order, but underneath, it knows the correct order in which to create them.</p>
<p>Once we're satisfied that Terraform will do what we want it to do, we can move on to actually making these things exist!</p>
<hr />
<h3 id="part-4-terraform-apply">Part 4: Terraform Apply<a class="headerlink" href="#part-4-terraform-apply" title="Permanent link">#</a></h3>
<p>Run <code>terraform apply</code> to begin the process.</p>
<p>We should see output like the following:</p>
<div class="codehilite"><pre><span></span>layer0_environment.demo: Refreshing state...
...
...
...
layer0_service.guestbook: Creation complete

Apply complete! Resources: 7 added, 0 changed, 0 destroyed.

The state of your infrastructure has been saved to the path
below. This state is required to modify and destroy your
infrastructure, so keep it safe. To inspect the complete state
use the `terraform show` command.

State path: terraform.tfstate

Outputs:

guestbook_url = &lt;http endpoint for the sample application&gt;
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It may take a few minutes for the guestbook service to launch and the load balancer to become available. During that time you may get HTTP 503 errors when making HTTP requests against the load balancer URL.</p>
</div>
<h3 id="whats-happening">What's Happening<a class="headerlink" href="#whats-happening" title="Permanent link">#</a></h3>
<p>Terraform provisions the AWS resources through Layer0, configures environment variables for the application, and deploys the application into a Layer0 environment. Terraform also writes the state of your deployment to the <code>terraform.tfstate</code> file (creating a new one if it's not already there).</p>
<h3 id="cleanup_1">Cleanup<a class="headerlink" href="#cleanup_1" title="Permanent link">#</a></h3>
<p>When you're finished with the example, you can instruct Terraform to destroy the Layer0 environment, and terminate the application. Execute the following command (in the same directory):</p>
<p><code>terraform destroy</code></p>
<p>It's also now safe to remove the <code>.terraform/</code> directory and the <code>*.tfstate*</code> files.</p>
<hr />
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../intro/" title="Walkthrough: Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Walkthrough: Introduction
              </span>
            </div>
          </a>
        
        
          <a href="../deployment-2/" title="Walkthrough: Deployment 2" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Walkthrough: Deployment 2
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.cae2244d.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>